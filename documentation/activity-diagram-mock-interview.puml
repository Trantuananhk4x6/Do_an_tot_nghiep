@startuml activity-diagram-mock-interview
title Activity Diagram - Mock Interview
skinparam backgroundColor #FEFEFE
skinparam ActivityBackgroundColor #E8F4FD
skinparam ActivityBorderColor #3498DB
skinparam ActivityStartColor #27AE60
skinparam ActivityEndColor #E74C3C
skinparam ActivityDiamondBackgroundColor #F39C12
skinparam ActivityDiamondBorderColor #E67E22
skinparam SwimlaneBorderColor #2C3E50
skinparam SwimlaneTitleBackgroundColor #34495E
skinparam SwimlaneTitleFontColor white

|User|
start
:Chọn "Mock Interview" trên menu;

|System|
:Hiển thị giao diện Mock Interview;
:Hiển thị Modal chọn Interview Set;

|User|
:Chọn Interview Set đã tạo từ Prepare Hub;

|System|
:Tải danh sách câu hỏi;
:Tải thông tin người phỏng vấn ảo (Voice, Avatar);

|User|
:Nhấn "Start Interview";

|System|
if (Yêu cầu quyền Camera?) then (Cho phép)
  :Bật Camera và hiển thị webcam;
else (Từ chối)
  :Tiếp tục không có camera;
endif

:Bắt đầu đếm thời gian phỏng vấn;
:Khởi tạo Interview Session;
:Hiển thị Avatar AI (D-ID);
:Đọc câu hỏi đầu tiên (TTS);

|User|
repeat
  :Trả lời câu hỏi bằng giọng nói hoặc text;
  
  |System|
  :Ghi nhận câu trả lời;
  :Hiển thị câu trả lời trong Transcript;
  :Lưu vào Interview Session;
  
  if (Còn câu hỏi tiếp theo?) then (Có)
    :Đọc câu chuyển tiếp;
    :Đọc câu hỏi tiếp theo;
    |User|
  else (Không)
  endif
  
repeat while (Còn câu hỏi?) is (Có)
->Không;

|System|
:Đọc lời kết thúc phỏng vấn;
:Tính thời gian phỏng vấn;
:Gọi API đánh giá phỏng vấn (assess-interview);
:Lưu kết quả vào sessionStorage;
:Chuyển đến trang Assessment Report;
:Hiển thị kết quả đánh giá chi tiết;

|User|
:Xem báo cáo đánh giá;

stop

legend right
  |= Ký hiệu |= Mô tả |
  | Hình oval | Bắt đầu/Kết thúc |
  | Hình chữ nhật | Hoạt động |
  | Hình thoi | Điều kiện |
  | Swimlane | Phân chia Actor |
endlegend

@enduml
